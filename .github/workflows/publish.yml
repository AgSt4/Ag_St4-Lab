on:
  push:
    branches: main
name: Render and Publish
permissions:
  contents: write
  pages: write
jobs:
  build-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Check out repository
        uses: actions/checkout@v4
      
      - name: Set up Quarto
        uses: quarto-dev/quarto-actions/setup@v2
      
      - name: Install TinyTeX
        run: |
          wget -qO- "https://yihui.org/tinytex/install-bin-unix.sh" | sh
          echo "$HOME/.TinyTeX/bin/x86_64-linux" >> $GITHUB_PATH
      
      - name: Add TinyTeX to PATH for current session
        run: |
          export PATH="$HOME/.TinyTeX/bin/x86_64-linux:$PATH"
          echo "PATH=$HOME/.TinyTeX/bin/x86_64-linux:$PATH" >> $GITHUB_ENV
      
      - name: Verify TinyTeX installation
        run: |
          which tlmgr
          tlmgr --version
      
      - name: Install required LaTeX packages
        run: |
          tlmgr update --self
          tlmgr install babel-spanish babel-english
          tlmgr install beamer
          tlmgr install pgf xcolor
          tlmgr install amsmath amsfonts amssymb
          tlmgr install geometry fancyhdr
          tlmgr install graphicx
          tlmgr install hyperref
          tlmgr install ifthen
          tlmgr install etoolbox
          tlmgr install translator
      
      - name: Install Fira Sans fonts
        run: |
          sudo apt-get update
          sudo apt-get install -y fonts-firacode fonts-fira-sans
      
      - name: Render and Publish
        uses: quarto-dev/quarto-actions/publish@v2
        with:
          target: gh-pages
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
